<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>יצירת עלון ומודעת אבל - לעילוי נשמת</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Frank+Ruhl+Libre:wght@400;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Frank Ruhl Libre', serif;
            line-height: 1.9;
            background-color: #f4f4f4;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            max-width: 800px;
            width: 100%;
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            box-sizing: border-box; 
        }
        
        /* --- עיצוב לשוניות --- */
        .tab-buttons {
            display: flex;
            border-bottom: 2px solid #ccc;
            margin-bottom: 20px;
        }
        .tab-button {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #f1f1f1;
            border: 1px solid #ccc;
            border-bottom: none;
            margin-left: 5px;
            border-radius: 5px 5px 0 0;
            font-size: 1.1em;
            font-weight: 700;
        }
        .tab-button:focus-visible { /* הוספה לנגישות מקלדת */
            outline: 2px solid #0056b3;
            outline-offset: 2px;
        }
        .tab-button.active {
            background-color: #fff;
            border-bottom: 2px solid #fff;
            position: relative;
            top: 2px;
            border-bottom-color: #fff;
        }
        .tab-pane {
            display: none;
        }
        .tab-pane.active {
            display: block;
        }
        /* --- סוף עיצוב לשוניות --- */

        h1, h2, h3 {
            font-weight: 700;
            text-align: center;
            color: #004a99;
        }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="text"], textarea {
            width: 100%;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ccc;
            box-sizing: border-box;
            font-size: 16px;
            font-family: 'Frank Ruhl Libre', serif;
        }
        input:required, textarea:required { /* סימון ויזואלי קל לשדות חובה */
            border-left: 3px solid #007bff;
        }
        textarea {
            min-height: 100px;
            line-height: 1.7;
        }
        .gender-options { display: flex; gap: 20px; margin-top: 10px; }
        button {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-family: 'Frank Ruhl Libre', serif;
            font-weight: 700;
        }
        button:hover { background-color: #0056b3; }
        
        #alonResult, #modaaResult {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .chapter-title {
            font-weight: 700;
            font-size: 1.4em;
            margin-top: 25px;
            border-bottom: 2px solid #0056b3;
            padding-bottom: 5px;
            color: #0056b3;
        }
        .verse {
            margin-bottom: 12px;
            font-size: 1.1em;
        }
        .verse strong { color: #000; }
        .printButton { margin-top: 20px; background-color: #28a745; }
        .printButton:hover { background-color: #218838; }
        .hidden { display: none; }

        .tehillim-columns { column-count: 2; column-gap: 40px; column-rule: 1px solid #eee; }
        .tehillim-chapter { break-inside: avoid; }
        .tehillim-chapter h3 { margin-top: 10px; font-size: 1.2em; }
        
        /* --- עיצוב מודעת אבל --- */
        .modaa-output-container {
            border: 10px solid #000;
            padding: 25px;
            background: #fff;
            text-align: center;
        }
        .modaa-header {
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 20px;
        }
        .modaa-content {
            font-size: 1.3em;
            line-height: 1.8;
        }
        .modaa-content p {
            margin: 15px 0;
        }
        .modaa-content strong {
            font-size: 1.4em;
            display: block;
            margin-top: 10px;
            margin-bottom: 10px;
        }
        .modaa-content .mourners {
            white-space: pre-line;
            text-align: right;
            margin-top: 20px;
            font-size: 1.1em;
        }
        /* --- סוף עיצוב מודעת אבל --- */

        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            width: 100%;
            max-width: 800px;
            font-size: 1em;
            color: #666;
            line-height: 1.7;
            box-sizing: border-box;
        }
        footer strong { color: #333; }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 15px;
            }
            .tehillim-columns {
                column-count: 1;
                column-rule: none;
            }
            h1 {
                font-size: 1.8em;
            }
            .tab-button {
                padding: 10px 12px;
                font-size: 1em;
                flex-grow: 1; /* יגרום לכפתורים למלא את השורה בנייד */
                text-align: center;
                margin-left: 0;
            }
            .modaa-output-container {
                padding: 15px;
            }
            .modaa-header {
                font-size: 1.5em;
            }
            .modaa-content {
                font-size: 1.1em;
            }
            .modaa-content strong {
                font-size: 1.2em;
            }
        }


        @media print {
            body { background-color: #fff; font-size: 12pt; }
            .container { box-shadow: none; padding: 0; }
            .tab-buttons, .form-container, .printButton, footer {
                display: none;
            }
            #alonResult, #modaaResult {
                margin-top: 0; padding: 0; border: none;
            }
            #modaaResult .modaa-output-container {
                border: 10px solid #000;
                padding: 25px;
                height: 90vh;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        
        <div class="tab-buttons" role="tablist">
            <button class="tab-button active" role="tab" aria-selected="true" aria-controls="alon" onclick="openTab(event, 'alon')">יצירת עלון לעילוי נשמת</button>
            <button class="tab-button" role="tab" aria-selected="false" aria-controls="modaa" onclick="openTab(event, 'modaa')">יצירת מודעת אבל</button>
        </div>

        <div id="alon" class="tab-pane active" role="tabpanel">
            <div class="form-container">
                <h1>יצירת עלון לעילוי נשמת</h1>
                <form id="alonForm">
                    <div class="form-group">
                        <label for="name">שם פרטי של הנפטר/ת (ללא שם משפחה)</label>
                        <input type="text" id="name" placeholder="לדוגמה: משה" required>
                    </div>
                    <div class="form-group">
                        <label for="parentName">שם האב/האם</label>
                        <input type="text" id="parentName" placeholder="לדוגמה: עמרם" required>
                    </div>
                    <div class="form-group">
                        <label>מין</label>
                        <div class="gender-options">
                            <label><input type="radio" name="gender" value="male" checked> זכר</label>
                            <label><input type="radio" name="gender" value="female"> נקבה</label>
                        </div>
                    </div>
                    <button type="submit">צור עלון</button>
                </form>
            </div>
            <div id="alonResult" class="hidden" aria-live="polite"></div>
            <button id="alonPrintButton" class="printButton hidden" onclick="window.print()">הדפס עלון</button>
        </div>

        <div id="modaa" class="tab-pane" role="tabpanel">
            <div class="form-container">
                <h1>יצירת מודעת אבל</h1>
                <form id="modaaForm">
                    <div class="form-group">
                        <label for="deceasedName">שם הנפטר/ת</label>
                        <input type="text" id="deceasedName" placeholder="לדוגמה: יצחק צוברי ז&quot;ל" required>
                    </div>
                    <div class="form-group">
                        <label for="deceasedInfo">תיאור הנפטר/ת</label>
                        <input type="text" id="deceasedInfo" placeholder="לדוגמה: אבינו, סבנו ובעלי היקר" required>
                    </div>
                    <div class="form-group">
                        <label for="funeralDetails">מועד ומקום הלוויה</label>
                        <input type="text" id="funeralDetails" placeholder="לדוגמה: ההלוויה תתקיים ביום ד'..." required>
                    </div>
                    <div class="form-group">
                        <label for="shivaDetails">מקום וזמני השבעה</label>
                        <input type="text" id="shivaDetails" placeholder="לדוגמה: יושבים שבעה בבית המנוח..." required>
                    </div>
                    <div class="form-group">
                        <label for="mournersList">האבלים (כתבו כל משפחה בשורה חדשה)</label>
                        <textarea id="mournersList" placeholder="לדוגמה: רעייתו: בתיה&#10;ילדיו: ...&#10;אחיו: ..." required></textarea>
                    </div>
                    <button type="submit">צור מודעת אבל</button>
                </form>
            </div>
            <div id="modaaResult" class="hidden" aria-live="polite"></div>
            <button id="modaaPrintButton" class="printButton hidden" onclick="window.print()">הדפס מודעה</button>
        </div>

    </div>

    <footer>
        <p>
            האתר הוקם ברוב אהבה לעילוי נשמת
            <br>
            <strong>ציון נשיא בן רבקה ואברהם ז"ל</strong>
            <br>
            <strong>פרידה נשיא בת שרה וניסים ע"ה</strong>
            <br>
            <strong>יצחק צוברי בן נדרה ויחיא ז"ל</strong>
            <br>
            <strong>בתיה צוברי בת זוהרה ויחיא ע"ה</strong>
            <br>
            ת.נ.צ.ב.ה.
        </p>
    </footer>


    <script>
        // --- קוד הלשוניות (משופר לנגישות) ---
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            
            tabcontent = document.getElementsByClassName("tab-pane");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].classList.remove("active");
                tabcontent[i].style.display = "none";
            }
            
            tablinks = document.getElementsByClassName("tab-button");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
                tablinks[i].setAttribute("aria-selected", "false");
            }
            
            document.getElementById(tabName).style.display = "block";
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.className += " active";
            evt.currentTarget.setAttribute("aria-selected", "true");
        }
        document.getElementById("alon").style.display = "block";

        
        // --- קוד יצירת עלון (מותאם לטופס) ---
        document.getElementById('alonForm').addEventListener('submit', function(e) {
            e.preventDefault(); // מונע שליחה רגילה של הטופס
            generateAlon();
        });

        // --- קוד יצירת מודעת אבל (מותאם לטופס) ---
        document.getElementById('modaaForm').addEventListener('submit', function(e) {
            e.preventDefault(); // מונע שליחה רגילה של הטופס
            generateModaa();
        });


        // (כל שאר הפונקציות והמשתנים נשארים זהים)
        const tehillim_119 = {
            'א': `
                <div class="verse">אַשְׁרֵי תְמִימֵי דָרֶךְ הַהֹלְכִים בְּתוֹרַת יְהוָה.</div><div class="verse">אַשְׁרֵי נֹצְרֵי עֵדֹתָיו בְּכָל לֵב יִדְרְשׁוּהוּ.</div><div class="verse">אַף לֹא פָעֲלוּ עַוְלָה בִּדְרָכָיו הָלָכוּ.</div><div class="verse">אַתָּה צִוִּיתָה פִקֻּדֶיךָ לִשְׁמֹר מְאֹד.</div><div class="verse">אַחֲלַי יִכֹּנוּ דְרָכָי לִשְׁמֹר חֻקֶּיךָ.</div><div class="verse">אָז לֹא אֵבוֹשׁ בְּהַבִּיטִי אֶל כָּל מִצְו‍ֹתֶיךָ.</div><div class="verse">אוֹדְךָ בְּיֹשֶׁר לֵבָב בְּלָמְדִי מִשְׁפְּטֵי צִדְקֶךָ.</div><div class="verse">אֶת חֻקֶּיךָ אֶשְׁמֹר אַל תַּעַזְבֵנִי עַד מְאֹד.</div>
            `, 'ב': `
                <div class="verse">בַּמֶּה יְזַכֶּה נַּעַר אֶת אָרְחוֹ לִשְׁמֹר כִּדְבָרֶךָ.</div><div class="verse">בְּכָל לִבִּי דְרַשְׁתִּיךָ אַל תַּשְׁגֵּנִי מִמִּצְו‍ֹתֶיךָ.</div><div class="verse">בְּלִבִּי צָפַנְתִּי אִמְרָתֶךָ לְמַעַן לֹא אֶחֱטָא לָךְ.</div><div class="verse">בָּרוּךְ אַתָּה יְהוָה לַמְּדֵנִי חֻקֶּיךָ.</div><div class="verse">בִּשְׂפָתַי סִפַּרְתִּי כֹּל מִשְׁפְּטֵי פִיךָ.</div><div class="verse">בְּדֶרֶךְ עֵדְו‍ֹתֶיךָ שַׂשׂתִּי כְּעַל כָּל הוֹן.</div><div class="verse">בְּפִקּוּדֶיךָ אָשִׂיחָה וְאַבִּיטָה אֹרְחֹתֶיךָ.</div><div class="verse">בְּחֻקֹּתֶיךָ אֶשְׁתַּעֲשָׁע לֹא אֶשְׁכַּח דְּבָרֶךָ.</div>
            `, 'ג': `
                <div class="verse">גְּמֹל עַל עַבְדְּךָ אֶחְיֶה וְאֶשְׁמְרָה דְבָרֶךָ.</div><div class="verse">גַּל עֵינַי וְאַבִּיטָה נִפְלָאוֹת מִתּוֹרָתֶךָ.</div><div class="verse">גֵּר אָנֹכִי בָאָרֶץ אַל תַּסְתֵּר מִמֶּנִּי מִצְו‍ֹתֶיךָ.</div><div class="verse">גָּרְסָה נַפְשִׁי לְתַאֲבָה אֶל מִשְׁפָּטֶיךָ בְכָל עֵת.</div><div class="verse">גָּעַרְתָּ זֵדִים אֲרוּרִים הַשֹּׁגִים מִמִּצְו‍ֹתֶיךָ.</div><div class="verse">גַּל מֵעָלַי חֶרְפָּה וָבוּז כִּי עֵדֹתֶיךָ נָצָרְתִּי.</div><div class="verse">גַּם יָשְׁבוּ שָׂרִים בִּי נִדְבָּרוּ עַבְדְּךָ יָשִׂיחַ בְּחֻקֶּיךָ.</div><div class="verse">גַּם עֵדֹתֶיךָ שַׁעֲשֻׁעָי אַנְשֵׁי עֲצָתִי.</div>
            `, 'ד': `
                <div class="verse">דָּבְקָה לֶעָפָר נַפְשִׁי חַיֵּנִי כִּדְבָרֶךָ.</div><div class="verse">דְּרָכַי סִפַּרְתִּי וַתַּעֲנֵנִי לַמְּדֵנִי חֻקֶּיךָ.</div><div class="verse">דֶּרֶךְ פִּקּוּדֶיךָ הֲבִינֵנִי וְאָשִׂיחָה בְּנִפְלְאוֹתֶיךָ.</div><div class="verse">דָּלְפָה נַפְשִׁי מִתּוּגָה קַיְּמֵנִי כִּדְבָרֶךָ.</div><div class="verse">דֶּרֶךְ שֶׁקֶר הָסֵר מִמֶּנִּי וְתוֹרָתְךָ חָנֵּנִי.</div><div class="verse">דֶּרֶךְ אֱמוּנָה בָחָרְתִּי מִשְׁפָּטֶיךָ שִׁוִּיתִי.</div><div class="verse">דָּבַקְתִּי בְעֵדְו‍ֹתֶיךָ יְהוָה אַל תְּבִישֵׁנִי.</div><div class="verse">דֶּרֶךְ מִצְו‍ֹתֶיךָ אָרוּץ כִּי תַרְחִיב לִבִּי.</div>
            `, 'ה': `
                <div class="verse">הוֹרֵנִי יְהוָה דֶּרֶךְ חֻקֶּיךָ וְאֶצְּרֶנָּה עֵקֶב.</div><div class="verse">הֲבִינֵנִי וְאֶצְּרָה תוֹרָתֶךָ וְאֶשְׁמְרֶנָּה בְכָל לֵב.</div><div class="verse">הַדְרִיכֵנִי בִּנְתִיב מִצְו‍ֹתֶיךָ כִּי בוֹ חָפָצְתִּי.</div><div class="verse">הַט לִבִּי אֶל עֵדְו‍ֹתֶיךָ וְאַל אֶל בָּצַע.</div><div class="verse">הַעֲבֵר עֵינַי מֵרְאוֹת שָׁוְא בִּדְרָכֶךָ חַיֵּנִי.</div><div class="verse">הָקֵם לְעַבְדְּךָ אִמְרָתֶךָ אֲשֶׁר לְיִרְאָתֶךָ.</div><div class="verse">הַעֲבֵר חֶרְפָּתִי אֲשֶׁר יָגֹרְתִּי כִּי מִשְׁפָּטֶיךָ טוֹבִים.</div><div class="verse">הִנֵּה תָּאַבְתִּי לְפִקֻּדֶיךָ בְּצִדְקָתְךָ חַיֵּנִי.</div>
            `, 'ו': `
                <div class="verse">וִיבֹאֻנִי חֲסָדֶךָ יְהוָה תְּשׁוּעָתְךָ כְּאִמְרָתֶךָ.</div><div class="verse">וְאֶעֱנֶה חֹרְפִי דָבָר כִּי בָטַחְתִּי בִּדְבָרֶךָ.</div><div class="verse">וְאַל תַּצֵּל מִפִּי דְבַר אֱמֶת עַד מְאֹד כִּי לְמִשְׁפָּטֶךָ יִחָלְתִּי.</div><div class="verse">וְאֶשְׁמְרָה תוֹרָתְךָ תָמִיד לְעוֹלָם וָעֶד.</div><div class="verse">וְאֶתְהַלְּכָה בָרְחָבָה כִּי פִקֻּדֶיךָ דָרָשְׁתִּי.</div><div class="verse">וַאֲדַבְּרָה בְעֵדֹתֶיךָ נֶגֶד מְלָכִים וְלֹא אֵבוֹשׁ.</div><div class="verse">וְאֶשְׁתַּעֲשַׁע בְּמִצְו‍ֹתֶיךָ אֲשֶׁר אָהָבְתִּי.</div><div class="verse">וְאֶשָּׂא כַפַּי אֶל מִצְו‍ֹתֶיךָ אֲשֶׁר אָהָבְתִּי וְאָשִׂיחָה בְחֻקֶּיךָ.</div>
            `, 'ז': `
                <div class="verse">זְכֹר דָּבָר לְעַבְדֶּךָ עַל אֲשֶׁר יִחַלְתָּנִי.</div><div class="verse">זֹאת נֶחָמָתִי בְעָנְיִי כִּי אִמְרָתְךָ חִיָּתְנִי.</div><div class="verse">זֵדִים הֱלִיצֻנִי עַד מְאֹד מִתּוֹרָתְךָ לֹא נָטִיתִי.</div><div class="verse">זָכַרְתִּי מִשְׁפָּטֶיךָ מֵעוֹלָם יְהוָה וָאֶתְנֶחָם.</div><div class="verse">זַלְעָפָה אֲחָזַתְנִי מֵרְשָׁעִים עֹזְבֵי תּוֹרָתֶךָ.</div><div class="verse">זְמִרוֹת הָיוּ לִי חֻקֶּיךָ בְּבֵית מְגוּרָי.</div><div class="verse">זָכַרְתִּי בַלַּיְלָה שִׁמְךָ יְהוָה וָאֶשְׁמְרָה תּוֹרָתֶךָ.</div><div class="verse">זֹאת הָיְתָה לִּי כִּי פִקּוּדֶיךָ נָצָרְתִּי.</div>
            `, 'ח': `
                <div class="verse">חֶלְקִי יְהוָה אָמַרְתִּי לִשְׁמֹר דְּבָרֶיךָ.</div><div class="verse">חִלִּיתִי פָנֶיךָ בְכָל לֵב חָנֵּנִי כְּאִמְרָתֶךָ.</div><div class="verse">חִשַּׁבְתִּי דְרָכָי וָאָשִׁיבָה רַגְלַי אֶל עֵדֹתֶיךָ.</div><div class="verse">חַשְׁתִּי וְלֹא הִתְמַהְמָהְתִּי לִשְׁמֹר מִצְו‍ֹתֶיךָ.</div><div class="verse">חֶבְלֵי רְשָׁעִים עִוְּדֻנִי תּוֹרָתְךָ לֹא שָׁכָחְתִּי.</div><div class="verse">חֲצוֹת לַיְלָה אָקוּם לְהוֹדוֹת לָךְ עַל מִשְׁפְּטֵי צִדְקֶךָ.</div><div class="verse">חָבֵר אָנִי לְכָל אֲשֶׁר יְרֵאוּךָ וּלְשֹׁמְרֵי פִּקּוּדֶיךָ.</div><div class="verse">חַסְדְּךָ יְהוָה מָלְאָה הָאָרֶץ חֻקֶּיךָ לַמְּדֵנִי.</div>
            `, 'ט': `
                <div class="verse">טוֹב עָשִׂיתָ עִם עַבְדְּךָ יְהוָה כִּדְבָרֶךָ.</div><div class="verse">טוּב טַעַם וָדַעַת לַמְּדֵנִי כִּי בְמִצְו‍ֹתֶיךָ הֶאֱמָנְתִּי.</div><div class="verse">טֶרֶם אֶעֱנֶה אֲנִי שֹׁגֵג וְעַתָּה אִמְרָתְךָ שָׁמָרְתִּי.</div><div class="verse">טוֹב אַתָּה וּמֵטִיב לַמְּדֵנִי חֻקֶּיךָ.</div><div class="verse">טָפְלוּ עָלַי שֶׁקֶר זֵדִים אֲנִי בְּכָל לֵב אֶצֹּר פִּקּוּדֶיךָ.</div><div class="verse">טָפַשׁ כַּחֵלֶב לִבָּם אֲנִי תּוֹרָתְךָ שִׁעֲשָׁעְתִּי.</div><div class="verse">טוֹב לִי כִי עֻנֵּיתִי לְמַעַן אֶלְמַד חֻקֶּיךָ.</div><div class="verse">טוֹב לִי תוֹרַת פִּיךָ מֵאַלְפֵי זָהָב וָכָסֶף.</div>
            `, 'י': `
                <div class="verse">יָדֶיךָ עָשׂוּנִי וַיְכוֹנְנוּנִי הֲבִינֵנִי וְאֶלְמְדָה מִצְו‍ֹתֶיךָ.</div><div class="verse">יְרֵאֶיךָ יִרְאוּנִי וְיִשְׂמָחוּ כִּי לִדְבָרְךָ יִחָלְתִּי.</div><div class="verse">יָדַעְתִּי יְהוָה כִּי צֶדֶק מִשְׁפָּטֶיךָ וֶאֱמוּנָה עִנִּיתָנִי.</div><div class="verse">יְהִי נָא חַסְדְּךָ לְנַחֲמֵנִי כְּאִמְרָתְךָ לְעַבְדֶּךָ.</div><div class="verse">יְבֹאוּנִי רַחֲמֶיךָ וְאֶחְיֶה כִּי תוֹרָתְךָ שַׁעֲשֻׁעָי.</div><div class="verse">יֵבֹשׁוּ זֵדִים כִּי שֶׁקֶר עִוְּתוּנִי אֲנִי אָשִׂיחַ בְּפִקּוּדֶיךָ.</div><div class="verse">יָשׁוּבוּ לִי יְרֵאֶיךָ וידעו [וְיֹדְעֵי] עֵדֹתֶיךָ.</div><div class="verse">יְהִי לִבִּי תָמִים בְּחֻקֶּיךָ לְמַעַן לֹא אֵבוֹשׁ.</div>
            `, 'כ': `
                <div class="verse">כָּלְתָה לִתְשׁוּעָתְךָ נַפְשִׁי לִדְבָרְךָ יִחָלְתִּי.</div><div class="verse">כָּלוּ עֵינַי לְאִמְרָתֶךָ לֵאמֹר מָתַי תְּנַחֲמֵנִי.</div><div class="verse">כִּי הָיִיתִי כְּנֹאד בְּקִיטוֹר חֻקֶּיךָ לֹא שָׁכָחְתִּי.</div><div class="verse">כַּמָּה יְמֵי עַבְדֶּךָ מָתַי תַּעֲשֶׂה בְרֹדְפַי מִשְׁפָּט.</div><div class="verse">כָּרוּ לִי זֵדִים שִׁיחוֹת אֲשֶׁר לֹא כְתוֹרָתֶךָ.</div><div class="verse">כָּל מִצְו‍ֹתֶיךָ אֱמוּנָה שֶׁקֶר רְדָפוּנִי עָזְרֵנִי.</div><div class="verse">כִּמְעַט כִּלּוּנִי בָאָרֶץ וַאֲנִי לֹא עָזַבְתִּי פִקּוּדֶיךָ.</div><div class="verse">כְּחַסְדְּךָ חַיֵּנִי וְאֶשְׁמְרָה עֵדוּת פִּיךָ.</div>
            `, 'ל': `
                <div class="verse">לְעוֹלָם יְהוָה דְּבָרְךָ נִצָּב בַּשָּׁמָיִם.</div><div class="verse">לְדֹר וָדֹר אֱמוּנָתֶךָ כּוֹנַנְתָּ אֶרֶץ וַתַּעֲמֹד.</div><div class="verse">לְמִשְׁפָּטֶיךָ עָמְדוּ הַיּוֹם כִּי הַכֹּל עֲבָדֶיךָ.</div><div class="verse">לוּלֵי תוֹרָתְךָ שַׁעֲשֻׁעָי אָז אָבַדְתִּי בְעָנְיִי.</div><div class="verse">לְעוֹלָם לֹא אֶשְׁכַּח פִּקּוּדֶיךָ כִּי בָם חִיִּיתָנִי.</div><div class="verse">לְךָ אֲנִי הוֹשִׁיעֵנִי כִּי פִקּוּדֶיךָ דָרָשְׁתִּי.</div><div class="verse">לִי קִוּוּ רְשָׁעִים לְאַבְּדֵנִי עֵדֹתֶיךָ אֶתְבּוֹנָן.</div><div class="verse">לְכָל תִּכְלָה רָאִיתִי קֵץ רְחָבָה מִצְוָתְךָ מְאֹד.</div>
            `, 'מ': `
                <div class="verse">מָה אָהַבְתִּי תוֹרָתֶךָ כָּל הַיּוֹם הִיא שִׂיחָתִי.</div><div class="verse">מֵאֹיְבַי תְּחַכְּמֵנִי מִצְו‍ֹתֶךָ כִּי לְעוֹלָם הִיא לִי.</div><div class="verse">מִכָּל מְלַמְּדַי הִשְׂכַּלְתִּי כִּי עֵדְו‍ֹתֶיךָ שִׂיחָה לִי.</div><div class="verse">מִזְּקֵנִים אֶתְבּוֹנָן כִּי פִקּוּדֶיךָ נָצָרְתִּי.</div><div class="verse">מִכָּל אֹרַח רָע כָּלִאתִי רַגְלָי לְמַעַן אֶשְׁמֹר דְּבָרֶךָ.</div><div class="verse">מִמִּשְׁפָּטֶיךָ לֹא סָרְתִּי כִּי אַתָּה הוֹרֵתָנִי.</div><div class="verse">מַה נִּמְלְצוּ לְחִכִּי אִמְרָתֶךָ מִדְּבַשׁ לְפִי.</div><div class="verse">מִפִּקּוּדֶיךָ אֶתְבּוֹנָן עַל כֵּן שָׂנֵאתִי כָּל אֹרַח שָׁקֶר.</div>
            `, 'נ': `
                <div class="verse">נֵר לְרַגְלִי דְבָרֶךָ וְאוֹר לִנְתִיבָתִי.</div><div class="verse">נִשְׁבַּעְתִּי וָאֲקַיֵּמָה לִשְׁמֹר מִשְׁפְּטֵי צִדְקֶךָ.</div><div class="verse">נַעֲנֵיתִי עַד מְאֹד יְהוָה חַיֵּנִי כִדְבָרֶךָ.</div><div class="verse">נִדְבוֹת פִּי רְצֵה נָא יְהוָה וּמִשְׁפָּטֶיךָ לַמְּדֵנִי.</div><div class="verse">נַפְשִׁי בְכַפִּי תָמִיד וְתוֹרָתְךָ לֹא שָׁכָחְתִּי.</div><div class="verse">נָתְנוּ רְשָׁעִים פַּח לִי וּמִפִּקּוּדֶיךָ לֹא תָעִיתִי.</div><div class="verse">נָחַלְתִּי עֵדְו‍ֹתֶיךָ לְעוֹלָם כִּי שְׂשׂוֹן לִבִּי הֵמָּה.</div><div class="verse">נָטִיתִי לִבִּי לַעֲשׂוֹת חֻקֶּיךָ לְעוֹלָם עֵקֶב.</div>
            `, 'ס': `
                <div class="verse">סֵעֲפִים שָׂנֵאתִי וְתוֹרָתְךָ אָהָבְתִּי.</div><div class="verse">סִתְרִי וּמָגִנִּי אָתָּה לִדְבָרְךָ יִחָלְתִּי.</div><div class="verse">סוּרוּ מִמֶּנִּי מְרֵעִים וְאֶצְּרָה מִצְו‍ֹת אֱלֹהָי.</div><div class="verse">סָמְכֵנִי כְאִמְרָתְךָ וְאֶחְיֶה וְאַל תְּבִישֵׁנִי מִשִּׂבְרִי.</div><div class="verse">סְעָדֵנִי וְאִוָּשֵׁעָה וְאֶשְׁעָה בְחֻקֶּיךָ תָמִיד.</div><div class="verse">סָלִיתָ כָּל שׁוֹגִים מֵחֻקֶּיךָ כִּי שֶׁקֶר תַּרְמִיתָם.</div><div class="verse">סִגִים הִשְׁבַּתָּ כָל רִשְׁעֵי אָרֶץ לָכֵן אָהַבְתִּי עֵדֹתֶיךָ.</div><div class="verse">סָמַר מִפַּחְדְּךָ בְשָׂרִי וּמִמִּשְׁפָּטֶיךָ יָרֵאתִי.</div>
            `, 'ע': `
                <div class="verse">עָשִׂיתִי מִשְׁפָּט וָצֶדֶק בַּל תַּנִּיחֵנִי לְעֹשְׁקָי.</div><div class="verse">עֲרֹב עַבְדְּךָ לְטוֹב אַל יַעַשְׁקֻנִי זֵדִים.</div><div class="verse">עֵינַי כָּלוּ לִישׁוּעָתֶךָ וּלְאִמְרַת צִדְקֶךָ.</div><div class="verse">עֲשֵׂה עִם עַבְדְּךָ כְחַסְדֶּךָ וְחֻקֶּיךָ לַמְּדֵנִי.</div><div class="verse">עַבְדְּךָ אָנִי הֲבִינֵנִי וְאֵדְעָה עֵדֹתֶיךָ.</div><div class="verse">עֵת לַעֲשׂוֹת לַיהוָה הֵפֵרוּ תּוֹרָתֶךָ.</div><div class="verse">עַל כֵּן אָהַבְתִּי מִצְו‍ֹתֶיךָ מִזָּהָב וּמִפָּז.</div><div class="verse">עַל כֵּן כָּל פִּקּוּדֵי כֹל יִשָּׁרְתִּי כָּל אֹרַח שֶׁקֶר שָׂנֵאתִי.</div>
            `, 'פ': `
                <div class="verse">פְּלָאוֹת עֵדְו‍ֹתֶיךָ עַל כֵּן נְצָרָתַם נַפְשִׁי.</div><div class="verse">פֵּתַח דְּבָרֶיךָ יָאִיר מֵבִין פְּתָיִים.</div><div class="verse">פִּי פָעַרְתִּי וָאֶשְׁאָפָה כִּי לְמִצְו‍ֹתֶיךָ יָאָבְתִּי.</div><div class="verse">פְּנֵה אֵלַי וְחָנֵּנִי כְּמִשְׁפָּט לְאֹהֲבֵי שְׁמֶךָ.</div><div class="verse">פְּעָמַי הָכֵן בְּאִמְרָתֶךָ וְאַל תַּשְׁלֶט בִּי כָל אָוֶן.</div><div class="verse">פְּדֵנִי מֵעֹשֶׁק אָדָם וְאֶשְׁמְרָה פִּקּוּדֶיךָ.</div><div class="verse">פָּנֶיךָ הָאֵר בְּעַבְדֶּךָ וְלַמְּדֵנִי אֶת חֻקֶּיךָ.</div><div class="verse">פַּלְגֵי מַיִם יָרְדוּ עֵינָי עַל לֹא שָׁמְרוּ תוֹרָתֶךָ.</div>
            `, 'צ': `
                <div class="verse">צַדִּיק אַתָּה יְהוָה וְיָשָׁר מִשְׁפָּטֶיךָ.</div><div class="verse">צִוִּיתָ צֶדֶק עֵדֹתֶיךָ וֶאֱמוּנָה מְאֹד.</div><div class="verse">צִמְּתַתְנִי קִנְאָתִי כִּי שָׁכְחוּ דְבָרֶיךָ צָרָי.</div><div class="verse">צְרוּפָה אִמְרָתְךָ מְאֹד וְעַבְדְּךָ אֲהֵבָהּ.</div><div class="verse">צָעִיר אָנֹכִי וְנִבְזֶה פִּקֻּדֶיךָ לֹא שָׁכָחְתִּי.</div><div class="verse">צִדְקָתְךָ צֶדֶק לְעוֹלָם וְתוֹרָתְךָ אֱמֶת.</div><div class="verse">צַר וּמָצוֹק מְצָאוּנִי מִצְו‍ֹתֶיךָ שַׁעֲשֻׁעָי.</div><div class="verse">צֶדֶק עֵדְו‍ֹתֶיךָ לְעוֹלָם הֲבִינֵנִי וְאֶחְיֶה.</div>
            `, 'ק': `
                <div class="verse">קָרָאתִי בְכָל לֵב עֲנֵנִי יְהוָה חֻקֶּיךָ אֶצֹּרָה.</div><div class="verse">קְרָאתִיךָ הוֹשִׁיעֵנִי וְאֶשְׁמְרָה עֵדֹתֶיךָ.</div><div class="verse">קִדַּמְתִּי בַנֶּשֶׁף וָאֲשַׁוֵּעָה לדבריך [לִדְבָרְךָ] יִחָלְתִּי.</div><div class="verse">קִדְּמוּ עֵינַי אַשְׁמֻרוֹת לָשִׂיחַ בְּאִמְרָתֶךָ.</div><div class="verse">קוֹלִי שִׁמְעָה כְחַסְדֶּךָ יְהוָה כְּמִשְׁפָּטֶךָ חַיֵּנִי.</div><div class="verse">קָרְבוּ רֹדְפֵי זִמָּה מִתּוֹרָתְךָ רָחָקוּ.</div><div class="verse">קָרוֹב אַתָּה יְהוָה וְכָל מִצְו‍ֹתֶיךָ אֱמֶת.</div><div class="verse">קֶדֶם יָדַעְתִּי מֵעֵדֹתֶיךָ כִּי לְעוֹלָם יְסַדְתָּם.</div>
            `, 'ר': `
                <div class="verse">רְאֵה עָנְיִי וְחַלְּצֵנִי כִּי תוֹרָתְךָ לֹא שָׁכָחְתִּי.</div><div class="verse">רִיבָה רִיבִי וּגְאָלֵנִי לְאִמְרָתְךָ חַיֵּנִי.</div><div class="verse">רָחוֹק מֵרְשָׁעִים יְשׁוּעָה כִּי חֻקֶּיךָ לֹא דָרָשׁוּ.</div><div class="verse">רַחֲמֶיךָ רַבִּים יְהוָה כְּמִשְׁפָּטֶיךָ חַיֵּנִי.</div><div class="verse">רַבִּים רֹדְפַי וְצָרָי מֵעֵדְו‍ֹתֶיךָ לֹא נָטִיתִי.</div><div class="verse">רָאִיתִי בֹגְדִים וָאֶתְקוֹטָטָה אֲשֶׁר אִמְרָתְךָ לֹא שָׁמָרוּ.</div><div class="verse">רְאֵה כִּי פִקּוּדֶיךָ אָהָבְתִּי יְהוָה כְּחַסְדְּךָ חַיֵּנִי.</div><div class="verse">רֹאשׁ דְּבָרְךָ אֱמֶת וּלְעוֹלָם כָּל מִשְׁפַּט צִדְקֶךָ.</div>
            `, 'ש': `
                <div class="verse">שָׂרִים רְדָפוּנִי חִנָּם וּמִדְּבָרְךָ פָּחַד לִבִּי.</div><div class="verse">שָׂשׂ אָנֹכִי עַל אִמְרָתֶךָ כְּמוֹצֵא שָׁלָל רָב.</div><div class="verse">שֶׁקֶר שָׂנֵאתִי וַאֲתַעֵבָה תּוֹרָתְךָ אָהָבְתִּי.</div><div class="verse">שֶׁבַע בַּיּוֹם הִלַּלְתִּיךָ עַל מִשְׁפְּטֵי צִדְקֶךָ.</div><div class="verse">שָׁלוֹם רָב לְאֹהֲבֵי תוֹרָתֶךָ וְאֵין לָמוֹ מִכְשׁוֹל.</div><div class="verse">שִׂבַּרְתִּי לִישׁוּעָתְךָ יְהוָה וּמִצְו‍ֹתֶיךָ עָשִׂיתִי.</div><div class="verse">שָׁמְרָה נַפְשִׁי עֵדֹתֶיךָ וָאֹהֲבֵם מְאֹד.</div><div class="verse">שָׁמַרְתִּי פִקּוּדֶיךָ וְעֵדֹתֶיךָ כִּי כָל דְּרָכַי נֶגְדֶּךָ.</div>
            `, 'ת': `
                <div class="verse">תִּקְרַב רִנָּתִי לְפָנֶיךָ יְהוָה כִּדְבָרְךָ הֲבִינֵנִי.</div><div class="verse">תָּבוֹא תְחִנָּתִי לְפָנֶיךָ כְּאִמְרָתְךָ הַצִּילֵנִי.</div><div class="verse">תַּבַּעְנָה שְׂפָתַי תְּהִלָּה כִּי תְלַמְּדֵנִי חֻקֶּיךָ.</div><div class="verse">תַּעַן לְשׁוֹנִי אִמְרָתֶךָ כִּי כָל מִצְו‍ֹתֶיךָ צֶּדֶק.</div><div class="verse">תְּהִי יָדְךָ לְעָזְרֵנִי כִּי פִקּוּדֶיךָ בָחָרְתִּי.</div><div class="verse">תָּאַבְתִּי לִישׁוּעָתְךָ יְהוָה וְתוֹרָתְךָ שַׁעֲשֻׁעָי.</div><div class="verse">תְּחִי נַפְשִׁי וּתְהַלְלֶךָּ וּמִשְׁפָּטֶךָ יַעְזְרֻנִי.</div><div class="verse">תָּעִיתִי כְּשֶׂה אֹבֵד בַּקֵּשׁ עַבְדֶּךָ כִּי מִצְו‍ֹתֶיךָ לֹא שָׁכָחְתִּי.</div>
            `};
        const hashkava = {
             male: `
                <div class="chapter-title">תפילת השכבה - "אל מלא רחמים"</div>
                <div class="verse">אֵל מָלֵא רַחֲמִים שׁוֹכֵן בַּמְּרוֹמִים, הַמְצֵא מְנוּחָה נְכוֹנָה עַל כַּנְפֵי הַשְּׁכִינָה, בְּמַעֲלוֹת קְדוֹשִׁים וּטְהוֹרִים כְּזוֹהַר הָרָקִיעַ מַזְהִירִים, אֶת נִשְׁמַת [FULL_NAME] שֶׁהָלַךְ לְעוֹלָמוֹ, בַּעֲבוּר שֶׁאֲנַחְנוּ מִתְפַּלְלִים לְעִלּוּי נִשְׁמָתוֹ. לָכֵן בַּעַל הָרַחֲמִים יַסְתִּירֵהוּ בְּסֵתֶר כְּנָפָיו לְעוֹלָמִים, וְיִצְרוֹר בִּצְרוֹר הַחַיִּים אֶת נִשְׁמָתוֹ, ה' הוּא נַחֲלָתוֹ, וְיָנוּחַ בְּשָׁלוֹם עַל מִשְׁכָּבוֹ, וְנֹאמַר אָמֵן.</div>
            `,
            female: `
                <div class="chapter-title">תפילת השכבה - "אל מלא רחמים"</div>
                <div class="verse">אֵל מָלֵא רַחֲמִים שׁוֹכֵן בַּמְּרוֹמִים, הַמְצֵא מְנוּחָה נְכוֹנָה עַל כַּנְפֵי הַשְּׁכִינָה, בְּמַעֲלוֹת קְדוֹשִים וּטְהוֹרִים כְּזוֹהַר הָרָקִיעַ מַזְהִירִים, אֶת נִשְׁמַת [FULL_NAME] שֶׁהָלְכָה לְעוֹלָמָהּ, בַּעֲבוּר שֶׁאֲנַחְנוּ מִתְפַּלְלִים לְעִלּוּי נִשְׁמָתָהּ. לָכֵן בַּעַל הָרַחֲמִים יַסְתִּירֶהָ בְּסֵתֶר כְּנָפָיו לְעוֹלָמִים, וְיִצְרוֹר בִּצְרוֹר הַחַיִּים אֶת נִשְׁמָתָהּ, ה' הוּא נַחֲלָתָהּ, וְתָנוּחַ בְּשָׁלוֹם עַל מִשְׁכָּבָהּ, וְנֹאמַר אָמֵן.</div>
            `};
        const kaddishYatomContent = `
            <div class="chapter-title">קדיש יתום</div>
            <div class="verse"><strong>האבל:</strong> יִתְגַּדַּל וְיִתְקַדַּשׁ שְׁמֵהּ רַבָּא. (קהל: אָמֵן)</div>
            <div class="verse">בְּעָלְמָא דִּי בְרָא כִרְעוּתֵהּ, וְיַמְלִיךְ מַלְכוּתֵהּ בְּחַיֵּיכוֹן וּבְיוֹמֵיכוֹן וּבְחַיֵּי דְכָל בֵּית יִשְׂרָאֵל, בַּעֲגָלָא וּבִזְמַן קָרִיב, וְאִמְרוּ אָמֵן.</div>
            <div class="verse"><strong>הקהל והאבל:</strong> יְהֵא שְׁמֵהּ רַבָּא מְבָרַךְ לְעָלַם וּלְעָלְמֵי עָלְמַיָּא.</div>
            <div class="verse"><strong>האבל:</strong> יִתְבָּרַךְ וְיִשְׁתַּבַּח, וְיִתְפָּאַר וְיִתְרוֹמַם וְיִתְנַשֵּׂא, וְיִתְהַדָּר וְיִתְעַלֶּה וְיִתְהַלָּל שְׁמֵהּ דְּקֻדְשָׁא, בְּרִיךְ הוּא. (קהל: אָמֵן)</div>
            <div class="verse">לְעֵלָּא מִן כָּל בִּרְכָתָא וְשִׁירָתָא, תֻּשְׁבְּחָתָא וְנֶחֱמָתָא דַּאֲמִירָן בְּעָלְמָא, וְאִמְרוּ אָמֵן. (קהל: אָמֵן)</div>
            <div class="verse">יְהֵא שְׁלָמָא רַבָּא מִן שְׁמַיָּא וְחַיִּים עָלֵינוּ וְעַל כָּל יִשְׂrָאֵל, וְאִמְרוּ אָמֵן. (קהל: אָמֵן)</div>
            <div class="verse">עוֹשֶׂה שָׁלוֹם בִּמְרוֹמָיו, הוּא יַעֲשֶׂה שָׁלוֹם עָלֵינוּ וְעַל כָּל יִשְׂרָאֵל, וְאִמְרוּ אָמֵן. (קהל: אָמֵן)</div>
        `;
        
        function generateAlon() {
            const name = document.getElementById('name').value.trim();
            const parentName = document.getElementById('parentName').value.trim();
            const gender = document.querySelector('input[name="gender"]:checked').value;
            const resultDiv = document.getElementById('alonResult');
            const printButton = document.getElementById('alonPrintButton');

            // ה-JS כבר לא בודק אם השדות מלאים, כי תכונת 'required' עושה זאת
            
            const cleanName = name.replace(/[^\u0590-\u05EA]/g, '');
            const finalLetters = { 'ך': 'כ', 'ם': 'מ', 'ן': 'נ', 'ף': 'פ', 'ץ': 'צ' };
            const letters = cleanName.split('').map(letter => finalLetters[letter] || letter);
            const neshamaLetters = ['נ', 'ש', 'מ', 'ה'];
            
            let htmlContent = `<h2>לְעִלּוּי נִשְׁמַת ${name} ${gender === 'male' ? 'בֶּן' : 'בַּת'} ${parentName} ז"ל</h2>`;
            
            let tehillimHtml = '';
            
            tehillimHtml += `<div class="chapter-title">פרקי תהילים לפי אותיות השם '${name}'</div>`;
            letters.forEach(letter => {
                if (tehillim_119[letter]) {
                    tehillimHtml += `<div class="tehillim-chapter"><h3>פרק לאות ${letter.toUpperCase()}</h3>${tehillim_119[letter]}</div>`;
                }
            });

            tehillimHtml += `<div class="chapter-title">פרקי תהילים לאותיות "נשמה"</div>`;
            neshamaLetters.forEach(letter => {
                if (tehillim_119[letter]) {
                    tehillimHtml += `<div class="tehillim-chapter"><h3>פרק לאות ${letter.toUpperCase()}</h3>${tehillim_119[letter]}</div>`;
                }
            });

            htmlContent += `<div class="tehillim-columns">${tehillimHtml}</div>`;

            const connectionWord = gender === 'male' ? 'בֶּן' : 'בַּת';
            const fullName = `${name} ${connectionWord} ${parentName}`;
            htmlContent += hashkava[gender].replace('[FULL_NAME]', fullName);
            
            htmlContent += kaddishYatomContent;

            resultDiv.innerHTML = htmlContent;
            resultDiv.classList.remove('hidden');
            printButton.classList.remove('hidden');
        }

        function generateModaa() {
            const name = document.getElementById('deceasedName').value.trim();
            const info = document.getElementById('deceasedInfo').value.trim();
            const funeral = document.getElementById('funeralDetails').value.trim();
            const shiva = document.getElementById('shivaDetails').value.trim();
            const mourners = document.getElementById('mournersList').value.trim();
            
            const resultDiv = document.getElementById('modaaResult');
            const printButton = document.getElementById('modaaPrintButton');
            
            let htmlContent = `
                <div class="modaa-output-container">
                    <div class="modaa-header">
                        בצער רב וביגון קודר אנו מודיעים על פטירתו של
                    </div>
                    <div class="modaa-content">
                        <p>${info}</p>
                        <strong>${name}</strong>
                        <p>${funeral}</p>
                        <p>${shiva}</p>
                        <p>המשפחה האבלה:</p>
                        <div class="mourners">${mourners}</div>
                    </div>
                </div>
            `;
            
            resultDiv.innerHTML = htmlContent;
            resultDiv.classList.remove('hidden');
            printButton.classList.remove('hidden');
        }
    </script>
</body>
</html>
